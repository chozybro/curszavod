# SEO Content Factory - Руководство по настройке

## Обзор системы

Автоматизированный SEO контент завод, который:
1. Читает темы из Google Sheets
2. Генерирует качественные статьи с помощью AI
3. Создает изображения для статей
4. Автоматически публикует контент в WordPress

## Предварительные требования

### 1. API ключи и сервисы
- **OpenAI API** - для генерации контента и изображений
- **Google Sheets API** - для работы с таблицами
- **WordPress REST API** - для публикации статей

### 2. WordPress настройки
- Установленный WordPress с включенным REST API
- Созданный Application Password для API доступа
- Настроенные категории для статей

## Настройка Google Sheets

### Структура таблицы "Content_Planning"
Создайте Google Sheet со следующими колонками:

| A | B | C | D | E | F | G | H |
|---|---|---|---|---|---|---|---|
| Topic | Keywords | Language | Word_Count | Status | Created_Date | Article_URL | Post_ID |
| Как выбрать ноутбук | ноутбук, выбор, характеристики | ru | 2000 | pending | | | |
| SEO оптимизация | SEO, оптимизация, продвижение | ru | 1500 | pending | | | |

**Описание колонок:**
- **Topic** - тема статьи
- **Keywords** - ключевые слова через запятую
- **Language** - язык статьи (ru, en, etc.)
- **Word_Count** - желаемое количество слов
- **Status** - статус (pending, published, error)
- **Created_Date** - дата создания
- **Article_URL** - ссылка на опубликованную статью
- **Post_ID** - ID поста в WordPress

## Настройка n8n

### 1. Импорт воркфлоу
1. Откройте n8n
2. Перейдите в раздел "Workflows"
3. Нажмите "Import from file"
4. Загрузите файл `seo-content-factory-workflow.json`

### 2. Настройка credentials

#### OpenAI API
1. Создайте credential типа "OpenAI API"
2. Введите ваш API ключ от OpenAI
3. Назовите его "OpenAI API"

#### Google Sheets
1. Создайте Service Account в Google Cloud Console
2. Скачайте JSON файл с ключами
3. Создайте credential типа "Google Service Account"
4. Загрузите JSON файл
5. Назовите его "Google Sheets Service Account"

#### WordPress
1. Создайте credential типа "WordPress API"
2. Введите URL вашего WordPress сайта
3. Введите Application Password
4. Назовите его "WordPress API"

### 3. Настройка переменных
В воркфлоу замените следующие значения:

- `YOUR_GOOGLE_SHEET_ID` - ID вашей Google таблицы
- `WordPress Site URL` - URL вашего WordPress сайта

## Настройка WordPress

### 1. Создание Application Password
1. Перейдите в WordPress Admin → Users → Your Profile
2. Прокрутите до "Application Passwords"
3. Введите название (например, "n8n API")
4. Нажмите "Add New Application Password"
5. Скопируйте сгенерированный пароль

### 2. Настройка REST API
Убедитесь, что REST API включен (обычно включен по умолчанию):
```
https://your-site.com/wp-json/wp/v2/
```

### 3. Создание категорий
Создайте необходимые категории для статей в WordPress Admin → Posts → Categories

## Настройка расписания

Воркфлоу настроен на запуск каждый рабочий день в 9:00 утра. Для изменения:
1. Откройте ноду "Daily Content Generation"
2. Измените cron выражение:
   - `0 9 * * 1-5` - каждый рабочий день в 9:00
   - `0 */6 * * *` - каждые 6 часов
   - `0 9 * * 0` - каждое воскресенье в 9:00

## Использование системы

### 1. Добавление новых тем
1. Откройте Google Sheet "Content_Planning"
2. Добавьте новую строку с темой статьи
3. Заполните все обязательные поля
4. Установите статус "pending"
5. Воркфлоу автоматически обработает тему при следующем запуске

### 2. Мониторинг процесса
- Проверяйте статус в Google Sheet
- Просматривайте логи выполнения в n8n
- Проверяйте опубликованные статьи в WordPress

### 3. Обработка ошибок
- Статьи с ошибками помечаются статусом "error"
- Проверяйте логи для диагностики проблем
- Исправьте ошибки и измените статус на "pending"

## Кастомизация

### Изменение AI промптов
Отредактируйте ноды "AI Research & Planning" и "Generate Article Content" для изменения:
- Стиля написания
- Структуры статей
- SEO требований

### Добавление новых полей
1. Добавьте колонки в Google Sheet
2. Обновите соответствующие ноды в воркфлоу
3. Добавьте новые поля в WordPress API запросы

### Изменение количества изображений
1. Отредактируйте ноду "Generate Article Images"
2. Измените параметр `n` (количество изображений)
3. Добавьте/удалите соответствующие ноды загрузки

## Устранение неполадок

### Частые проблемы:
1. **Ошибки API** - проверьте правильность ключей
2. **Проблемы с Google Sheets** - убедитесь в правильности ID таблицы
3. **Ошибки WordPress** - проверьте Application Password
4. **Проблемы с изображениями** - проверьте лимиты OpenAI API

### Логи и отладка:
- Используйте "Execute Workflow" для тестирования
- Проверяйте детали выполнения в n8n
- Анализируйте ответы API для диагностики

## Безопасность

1. **Храните API ключи в безопасности**
2. **Используйте Application Passwords вместо основных паролей**
3. **Регулярно обновляйте ключи доступа**
4. **Ограничьте доступ к Google Sheets**

## Масштабирование

Для увеличения производительности:
1. Добавьте параллельную обработку тем
2. Используйте очереди для больших объемов
3. Настройте мониторинг и алерты
4. Рассмотрите использование более мощных AI моделей

## Поддержка

При возникновении проблем:
1. Проверьте логи выполнения
2. Убедитесь в правильности всех настроек
3. Протестируйте каждый компонент отдельно
4. Обратитесь к документации n8n и API сервисов